---
layout:     post
title:      "Weekly 086"
subtitle:   "Algorithm: Distinct Subsequences II; Review: All of Netflix’s HDR video streaming is now dynamically optimized; Tips: System Design Interview - Rate Limiting; Share: "
thumbnail-img: ""
date:       2023-12-27 21:10
author:     "dreamume"
tags: 		[it]
category:   it
---
<head>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
</head>

# Table of Contents

1.  [Algorithm](#orgc12e928)
2.  [Review](#org7a4cbf9)
    1.  [比特率和质量比较](#org20e5204)
3.  [Tips](#orge9821fc)
4.  [Share](#org9bfc5d5)


<a id="orgc12e928"></a>

# Algorithm

Leetcode 940: [Distinct Subsequences II](https://leetcode.com/problems/distinct-subsequences-ii)

<https://dreamume.medium.com/leetcode-940-distinct-subsequences-ii-cfb43f1ffc6a>


<a id="org7a4cbf9"></a>

# Review

[All of Netflix’s HDR video streaming is now dynamically optimized](https://netflixtechblog.com/all-of-netflixs-hdr-video-streaming-is-now-dynamically-optimized-e9e0cb15f2ba)

高动态范围成像（HDR）视频带来更广亮度范围和更广的颜色范围，提供更绚丽的视觉体验。我们的动态优化编码发明依赖内容复杂度帮助获取优化的亮度质量

HDR 于 2016 年在 Netflix 出现且发展很快。然而，我们缺失 HDR 的度量感观质量（VMAF）的系统能力，因为 VMAF 受限于标准动态范围（SDR）视频信号

如之前的博客所说，我们开始开发一个 VMAF 的 HDR 变种；让我们称之为 HDR-VMAF。这个开发的一个及其重要的方面是预测 HDR 编码来产出训练数据。对大流行，导向一个方便的实验室 HDR 编码预测测试是唯一的挑战。我们临时起意作为杜比实验室合作效果的一部分且处理在校准条件下创造的参与者房间里使用高端 OLED 的 4K-HDR 内容做预测测试。HDR-VMAF 从属的细节超出了本文的范围且将在后续的博客中发布。现在，HDR-VMAF 的第一个版本在 2021 年内部着陆且我们一直在改进其度量

HDR-VMAF 的出现允许我们应用 DO 创建 HDR 流，例如，HDR-DO 编码。这之前，我们使用一个预定义比特率的固定梯子 - 对 HDR 视频流不管内容特征。我们在 2021 Q3-Q4 时在生产环境用 A/B 测试 HDR-DO 编码，在 2022 年早期改进梯子产生算法。我们从 2022 Q2 开始对现存的标题回填 HDR-DO 编码。在 2023 年 6 月整个 HDR 目录被优化。下图描述从固定比特率到 DO 编码的流量迁移

![img](../img/migration_of_traffic_from_fixed_ladder_encodes_to_DO_encodes.webp)


<a id="org20e5204"></a>

## 比特率和质量比较

HDR-VMAF 被设计为格式不可知的 - 它无视内容格式度量 HDR 视频信号的感知质量，例如，Dolby 图像或 HDR10。HDR-VMAF 聚焦信号特征（有损编码的结果）而不是显示特征，且它不包含流水线上的显示映射。显示映射是特别的色调映射应用于基于它自己特征的显示 - 峰值亮度、白水平、颜色范围等 - 且在比特流中基于信号的内容特征和/或元数据

HDR10 和杜比图像不同的两处是：1）预处理应用于编码之前的信号 2）元数据通知显示映射到不同的显示。这样，HDR-VMAF 将捕获效果 1）但忽略效果 2）。显示能力在各种各样 HDR 流内容的人口设备上大不同 - 这方面随着时间不同在设备各个因素上有变化比如环境光亮，视图距离，高端算法等。"VMAF 不兼容显示映射“意味着通过视频信号扩展整个颜色范围和呈现整个色彩范围的“理想显示”被计算成分数不需要显示映射。这个背景在查看速度 vs 质量曲线从属到这两个格式是有用的

以下显示从我们的 HDR 类目一对标题速度 vs 质量例子。我们呈现两个集合。每个集合我们显示杜比图像和 HDR10 的曲线。第一个集合对应一个美食烹饪系列节目显示世界上快节奏场景。第二个集合对应一个相对慢的喜剧系列节目；摄像机动作较慢。优化的编码通过各种速度 - 质量点对应不同比特率、空间解决方案和编码结果的凸面形式被选


<a id="orge9821fc"></a>

# Tips

[System Design Interview - Rate Limiting (local and distributed)](https://www.youtube.com/watch?v=FU4WlwfS3G0)

假设有一个 Web 服务，有大量的用户。在网络上有可能导致“邻居噪音问题“，一些客户占用过多资源，另一些客户导致高延迟。解决办法之一是使用限速器。限速器帮助限制客户在给定时间内请求数限制。超过限制的请求要么立即被拒绝或处理被延迟


<a id="org9bfc5d5"></a>

# Share

